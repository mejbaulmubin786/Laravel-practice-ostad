### Laravel Migration Structure (লারাভেল মাইগ্রেশন স্ট্রাকচার)

Laravel মাইগ্রেশন আমাদের ডাটাবেজের স্কিমা (schema) তৈরি, পরিবর্তন এবং ভার্সন কন্ট্রোলের মাধ্যমে ব্যবস্থাপনা করতে সহায়তা করে। এটি ডেভেলপারদের সহজেই ডাটাবেজ পরিবর্তন শেয়ার এবং পরিচালনা করতে দেয়, SQL কোড না লিখেও। চলুন ধাপে ধাপে মাইগ্রেশন স্ট্রাকচার এবং কাজগুলো বিস্তারিতভাবে বাংলায় বুঝে নিই।

#### ১. **ডাটাবেজ কনফিগারেশন**

মাইগ্রেশন রান করার আগে ডাটাবেজের সাথে সংযোগ কনফিগার করতে হবে। `.env` ফাইলে ডাটাবেজের তথ্য যুক্ত করতে হবে। আপনি যদি `laravel` নামে একটি ডাটাবেজ তৈরি করে থাকেন, তাহলে `.env` ফাইলে নিম্নোক্ত কোডটি থাকতে পারে:

```env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=laravel
DB_USERNAME=root
DB_PASSWORD=
```

আপনার ডাটাবেজ চালু এবং সঠিকভাবে কনফিগার করা হয়েছে কিনা তা নিশ্চিত করুন।

#### ২. **মাইগ্রেশন ফাইল তৈরি করা**

নতুন একটি মাইগ্রেশন ফাইল তৈরি করতে এই কমান্ডটি চালান:

```bash
php artisan make:migration create_profiles
```

এখানে `create_profiles` নাম দেওয়ার মাধ্যমে Laravel বুঝে নেয় যে আমরা `profiles` নামে একটি টেবিল তৈরি করতে চাই। এর ফলে একটি মাইগ্রেশন ফাইল তৈরি হবে নিচের মত স্ট্রাকচার সহ:

```php
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('profiles', function (Blueprint $table) {
            $table->id();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('profiles');
    }
};
```

#### ৩. **মাইগ্রেশন স্ট্রাকচার ব্যাখ্যা**

মাইগ্রেশন ফাইলটি মূলত দুটি মেথড (function) নিয়ে গঠিত:

-   **`up()`**: এই মেথড ব্যবহার করা হয় যখন আমরা ডাটাবেজে কিছু তৈরি করতে চাই, যেমন টেবিল বা নতুন কলাম যোগ করা। এখানে `Schema::create()` ফাংশন ব্যবহার করে `profiles` টেবিল তৈরি করা হচ্ছে।

-   **`down()`**: এটি বিপরীত কাজ করে, অর্থাৎ যদি মাইগ্রেশনটি রোলব্যাক (rollback) করা হয় তবে এই মেথডটি টেবিল বা ডেটা ড্রপ (drop) করবে। যেমন, `Schema::dropIfExists('profiles')` দ্বারা `profiles` টেবিলটি মুছে ফেলা হবে যদি তা আগে থেকেই বিদ্যমান থাকে।

#### ৪. **টেবিলের কাঠামো নির্ধারণ**

`up()` মেথডে আমরা টেবিলের কাঠামো নির্ধারণ করি। মূলত আমরা টেবিলের কলামগুলো এবং তাদের ডেটাটাইপ কী হবে তা ঠিক করি। নিচের কোডটি লক্ষ্য করুন:

```php
Schema::create('profiles', function (Blueprint $table) {
    $table->id();
    $table->string('name');
    $table->string('phone');
    $table->string('city');
    $table->timestamps();
});
```

-   `$table->id();`: প্রাইমারি কি (primary key) হিসেবে `id` কলামটি তৈরি করে, যা অটো ইনক্রিমেন্ট হয়।
-   `$table->string('name');`: `name` নামে একটি `VARCHAR` টাইপের কলাম তৈরি করে।
-   `$table->timestamps();`: দুটি অতিরিক্ত কলাম তৈরি করে, `created_at` এবং `updated_at`, যা Laravel স্বয়ংক্রিয়ভাবে ম্যানেজ করে।

#### ৫. **মাইগ্রেশন চালানো**

মাইগ্রেশন চালিয়ে টেবিলটি ডাটাবেজে তৈরি করতে এই কমান্ডটি ব্যবহার করতে হবে:

```bash
php artisan migrate
```

এই কমান্ডটি চালানোর সাথে সাথে Laravel সমস্ত পেন্ডিং মাইগ্রেশনগুলি সম্পন্ন করবে এবং ডাটাবেজে টেবিল তৈরি হবে। Laravel এর একটি `migrations` টেবিলও তৈরি করে, যা মাইগ্রেশনগুলো কতবার চালানো হয়েছে তা ট্র্যাক করে।

#### ৬. **Laravel এর অটোমেটিক টেবিলগুলো**

Laravel মাইগ্রেশন চালানোর সময় কিছু অতিরিক্ত টেবিল তৈরি করে, যেমন:

-   **`migrations`**: মাইগ্রেশনগুলোর ট্র্যাক রাখার জন্য।
-   **`personal_access_tokens`**: API টোকেন ম্যানেজমেন্টের জন্য, যদি আপনি Laravel এর বিল্ট-ইন অথেন্টিকেশন বা Passport ব্যবহার করেন।

#### ৭. **মাইগ্রেশন রোলব্যাক করা**

যদি মাইগ্রেশন রোলব্যাক করতে হয় তবে আপনি নিচের কমান্ডটি ব্যবহার করতে পারেন:

```bash
php artisan migrate:rollback
```

এটি মাইগ্রেশনের `down()` মেথডকে কল করবে এবং টেবিলটি ড্রপ করবে বা পূর্বের অবস্থায় ফিরিয়ে নেবে।

#### ৮. **টেবিলে নতুন কলাম বা পরিবর্তন যোগ করা**

যদি টেবিলে নতুন কলাম যোগ করতে চান তবে নতুন মাইগ্রেশন তৈরি করতে হবে। উদাহরণ:

```bash
php artisan make:migration add_age_to_profiles --table=profiles
```

এতে একটি নতুন কলাম `age` যোগ করা হবে:

```php
public function up(): void
{
    Schema::table('profiles', function (Blueprint $table) {
        $table->integer('age')->nullable();
    });
}

public function down(): void
{
    Schema::table('profiles', function (Blueprint $table) {
        $table->dropColumn('age');
    });
}
```

-   `$table->integer('age')`: একটি `age` নামক integer টাইপের কলাম যোগ করে।
-   `nullable()` দ্বারা সেই কলামটি null থাকতে পারে।

#### ৯. **মাইগ্রেশন বেস্ট প্র্যাকটিস**

-   **Plural টেবিল নাম**: সাধারণত টেবিলের নাম বহুবচন (plural) হিসেবে রাখা হয়, যেমন `profiles`, `users`। এটি বোঝায় যে একটি টেবিলে একাধিক রেকর্ড সংরক্ষিত হবে।
-   **মাইগ্রেশন অ্যাটোমিক রাখা**: প্রতিটি মাইগ্রেশন একটি নির্দিষ্ট কাজের জন্য হওয়া উচিত, যেমন টেবিল তৈরি বা কলাম যোগ করা।
-   **ভার্সন কন্ট্রোল**: মাইগ্রেশন ফাইলগুলো আপনার ভার্সন কন্ট্রোল সিস্টেমে অন্তর্ভুক্ত করা উচিত, যেন সকল ডেভেলপার একই মাইগ্রেশন ব্যবহার করতে পারেন।

#### ১০. **উপসংহার**

Laravel মাইগ্রেশন ব্যবহার করে ডাটাবেজ স্কিমা পরিচালনা করা অত্যন্ত সহজ ও কার্যকরী। এর মাধ্যমে আপনি ডাটাবেজের পরিবর্তনগুলো নিয়ন্ত্রণ করতে পারেন এবং প্রয়োজনে সেগুলো রোলব্যাক করতে পারেন। এই স্ট্রাকচারটি ব্যবহার করলে ডাটাবেজ টেবিল তৈরি, পরিচালনা ও পরিবর্তন করা অনেক সহজ হয়।
