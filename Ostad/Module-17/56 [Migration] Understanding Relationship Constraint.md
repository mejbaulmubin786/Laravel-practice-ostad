এর আগে আমরা ডাটাবেইজ রিলেশনশিপ এর ভিভিন্ন সাইন সম্পর্কে জেনেছি। যেমন ওয়ান টু ওয়ান এ কেমন হয় ওয়ান টু মেনি তে কেমন হয় ইত্যাদি। যখন আমরা একটি ডাটাবেইজ ডিজাইন করবো অর্থাৎ entity relationship diagram তৈরি করবো তখন অবশ্যই আমরা সেই চিহ্ন গুলো ভালোভাবে ব্যবহার করবো। এতে করে কোন ডেটাবেইজ এর টেবিল এর সাথে কোন টেবিলের কি রিলেশন শিপ আছে না আছে সব ডেফিনেশন আমরা সহজে বুঝতে পারবো। যখন আমরা একজন ডেভেলপার হিসেবে যখন আমরা রিলেশন শিপ ভালো ভাবে বুঝতে পারবো তখন আমাদের মাথায় পুরো ক্লিয়ার ভিষন চলে আসবে ডাটাবেইজ টা কিভাবে তৈরি করতে হবে কার সাথে কার রিলেশনশিপ থাকবে ডাটা কোথায় থেকে কোথায় যাবে না যাবে সব সিদ্ধান্ত আমরা entity relationship diagram থেকে আমরা নিতে পারবো। তাই এটা ধরেই আমরা লারাভেল এ মাইগ্রেশন চালাবো শুধু যে এটা নয় এটা দিয়ে আমরা যেখানে যেখানে যা যা প্রাইমারি কি আছে সেটা একই রকম তৈরে করবো যেখানে পরেন কি দেওয়া আছে তা মেনেজ করতে পারবো এই মাইগ্রেশন ফাইল দিয়েই। আমরা যখন শুধু টেবিল তৈরি করছি তখন কিন্তু রিলেশনশিপ ফরেনকি এই বিষয় গুলো নিয়ে আমাদের চিন্তা করতে হয় না । কিন্তু আমরা তো একটি টেবিল নিয়ে কাজ করবো না আমাদের অনেক গুলো টেবিল নিয়ে কাজ করতে হয় যা বিভিন্ন রিলেশনে সংযুক্ত থাকে। আর রিলেশনশিপ ডাটাবেইজে যদি ঠিক মতো রিলেশনশিপ তৈরি করা না হয় তবে ডেটা ইনকনসিসটেনসি তৈরি হবে। ডেটা ইনকনসিসটেনসি যাতে তৈরি না হয় এর জন্য লারাভেল মাইগ্রেশন এর ভেতর বেশ কিছু Relationship Constraint দেওয়া আছে। যেমন একটি হচ্ছে cascade আর একটি হচ্ছে restrict ।

| Method                     | Description                                      |
| -------------------------- | ------------------------------------------------ |
| $table->cascadeOnUpdate()  | Updates should cascade                           |
| $table->restrictOnUpdate() | Updates should restricted                        |
| $table->cascadeOnDelete()  | Deletes should cascade                           |
| $table->restrictOnDelete() | Deletes should restricted                        |
| $table->nullOnDelete()     | Deletes should set the foreign key value to null |

আচ্ছা রিলেশন শিপ কনট্রেন্ট বলতে আমরা কি বুঝি । আমরা যদি রিলেশন শিপ কনট্রেন্ট প্রেকটিক্যাল এক্সজাম্পল দিয়ে বুঝার চেষ্টা করি আমরা যে ইআর ডায়াগ্রামটি দেখছি তার অনেকগুলো টেবিল আছে যেমন একটি টেবিল আছে users সেই users এর ডিটেইল আবার আছে profiles টেবিলে। এখন আমরা যদি users কে পেরেন্ট টেবিল ধরি এবং profiles কে চাইল্ড টেবিল ধরি তবে users এর একটি রো users টেবিলে আছে আর সেই রো এর সাথে রিলেশনশিপ এ সেই ইউজার এর প্রোফাইল এর ডিটেইল টা আমার profiles টেবিলে থাকবে। এখন যদি এমন কোন ঘনটা ঘটে যে আমার profiles টেবিলে ডাটা আছে কিন্তু ইউজার্স টেবিলে ডাটা নাই তবে সেই প্রোফাইল এর তথ্য আমাদের কোনই কাজে লাগবে না কারণ সেই ফোইল টা কোন ইউজার এর সেই ্ইউজার টাই আমার নাই এখানেই তৈরি হবে ইনকনসিসটেনসি। আবার যদি উলটো টি হয় তখন ও ইনকনসিসটেনসি তৈরি হবে। একই ভাবে আমরা লক্ষ্য করলে products ও product_details এর মাঝে ও একই ঘটনা লক্ষ্য করবো। এই ভাবে ডাটা ইনকনসিসটেনসি এর পাশাপাশি আমাদের প্রচুর গারবেজ ডাটা তৈরি হবে । এই রকম কিছু যদি ট্যানজেকশনাল বিষয়ে ঘটে তবে (ট্যানজেকশনাল বিষয়ে মানে ধরুন আমরা একটি সপ্টওয়্যার তৈরি করছি সেখানে আমার সেলস মেনেজম্যান্ট আছে সেখানে আমার পারচেইজ মেনেজম্যান্ট আছে সেখানে আমার এক্সপেন্স মেনেজম্যান্ট আছে সেখানে যদি ইনকনসিসটেনসি তৈরি হয় তবে আমার সফটওয়্যার কিন্তু ভুল ক্যালকুলেশন দিবে। এভাবে কল্পনা করুন কোন একটি ইনভেনটরি মেনেজম্যান্ট সিস্টেমে তার সেল্স হিস্টরি আছে কিন্তু সেই সেলসটি কোন কাস্টমারের কাছে করেছে কাস্টমার এর ডিটেইল সে হারিয়ে ফেলেছে বা নাই তবে সেই রেকড এর কোনই দাম নেই। )। তো আমরা যতই ভালো সপ্টওয়্যার বানাই না কেন যদি এমন কোন সমস্যা থাকে তবে আমাদের কত ক্ষতি হবে তা কল্পনার ও অতীত। লারাভল এ এই বিষয়গুলো ম্যানটেন করার জন্য ই আমরা Relationship Constraint ব্যবহার করি। এর একটি হচ্ছে cascade আর একটি হচ্ছে restrict এবং। এই cascade এর অর্থ কি অর্থ হচ্ছে একটি হলে আর একটি হতেই হবে। আর restrict অর্থ আগের টা না হলে পরের টা হতে দিবো না। উদাহরন সরুপ আমাদের এখানে প্রোডাক্ট ও প্রোডাক্টডিটেইলস এর মাঝখানে একটি cascade কনস্ট্রান্ট তৈরি করি। সেক্ষেত্রে প্রোডাক্ট ডিলেট হয়ে গেলে প্রোডাক্ট এর সাথে যেহুতু ডিটেইলস এসোসিয়েটেড তাই এটিও ডিলেট হয়ে যাবে। cascadeOnDelete এর অর্থ হচ্ছে প্যারেন্ট এর সাথে যতো গুলো রিলেটেড চাইল্ড আছে সেগুলোও অটোমেটিক্যালি ডিলিট হয়ে যাবে আমাদের ম্যানুয়ালি ধরে ধরে আর ডিলেট করতে হবে না।
![alt text](image-3.png)
