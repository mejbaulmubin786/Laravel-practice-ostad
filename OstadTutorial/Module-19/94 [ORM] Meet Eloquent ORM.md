## Laravel Eloquent ORM: একটি পরিচিতি এবং কনভেনশন গুলি বুঝে নেওয়া

Laravel-এর Eloquent ORM (Object-Relational Mapper) হল একটি শক্তিশালী টুল যা ডাটাবেস ম্যানেজমেন্টকে সহজ করে। এটি আমাদের কোড এবং ডাটাবেসের মধ্যে একটি অ্যাবস্ট্রাকশন লেয়ার তৈরি করে, যা দিয়ে আমরা সরাসরি মডেলগুলির মাধ্যমে ডাটাবেসের সাথে কাজ করতে পারি।

### Eloquent ORM কি?

Eloquent ORM হল Laravel-এর একটি Object-Relational Mapper, যার মাধ্যমে ডাটাবেসের প্রতিটি টেবিলকে একটি নির্দিষ্ট "Model" ক্লাস দিয়ে রিপ্রেজেন্ট করা হয়। Eloquent ব্যবহারের ফলে আমরা সরাসরি SQL কোড না লিখে Laravel-এর বিভিন্ন মেথড ব্যবহার করে ডাটাবেস অপারেশন চালাতে পারি। এর ফলে সহজেই ডাটাবেসের তথ্য তৈরি (create), পরিবর্তন (update), মুছে ফেলা (delete), এবং দেখার (retrieve) কাজগুলো করা যায়।

### Eloquent এ Model এবং Table

Eloquent এ প্রতিটি মডেল একটি ডাটাবেস টেবিলকে রিপ্রেজেন্ট করে। উদাহরণস্বরূপ, যদি আমাদের ডাটাবেসে একটি `users` নামে টেবিল থাকে, তবে আমরা Laravel এ একটি `User` নামে মডেল তৈরি করতে পারি। এই মডেলটির মাধ্যমে আমরা `users` টেবিলে CRUD অপারেশন চালাতে পারবো।

### Eloquent এ সম্পর্ক (Relationship)

রিলেশনাল ডাটাবেসে বিভিন্ন ধরনের সম্পর্ক থাকে, যেমন: one-to-one, one-to-many, এবং many-to-many। Eloquent-এ আমরা মডেলগুলোর মধ্যে এই ধরনের সম্পর্কগুলি সংজ্ঞায়িত করতে পারি। Laravel এর কিছু গুরুত্বপূর্ণ Relationship মেথড:

- **hasOne**: একে এক সম্পর্ক সংজ্ঞায়িত করে।
- **hasMany**: একে বহু সম্পর্ক সংজ্ঞায়িত করে।
- **belongsTo**: বিপরীত এক-এক বা বহু সম্পর্ক সংজ্ঞায়িত করে।
- **belongsToMany**: বহু-থেকে-বহু সম্পর্ক সংজ্ঞায়িত করে।

এই সম্পর্কগুলি মডেলে সংজ্ঞায়িত করার মাধ্যমে, Eloquent সহজেই সম্পর্কিত ডেটা নিয়ে কাজ করতে পারে। উদাহরণস্বরূপ, একটি `Post` মডেলের অনেকগুলি `Comment` মডেল থাকতে পারে, সেক্ষেত্রে `$post->comments` এর মাধ্যমে নির্দিষ্ট পোস্টের সমস্ত মন্তব্য পাওয়া যায়।

### Eloquent এর কার্যপদ্ধতি

Eloquent ORM আমাদের অ্যাপ্লিকেশন কোড এবং ডাটাবেসের মধ্যে একটি লেয়ার তৈরি করে, যার ফলে ডাটাবেস অপারেশন আরও সহজ এবং সরলভাবে করা যায়। Eloquent ব্যবহার করার ফলে আমরা সরাসরি SQL কোয়েরি না লিখে বিভিন্ন মেথডের সাহায্যে ডাটাবেসের কাজগুলো সম্পাদন করতে পারি।

### Eloquent এর Naming Convention

Eloquent ORM এর সঠিক কার্যকারিতা পেতে Laravel নির্দিষ্ট কিছু Naming Convention অনুসরণ করে। নিচে কিছু গুরুত্বপূর্ণ কনভেনশন দেওয়া হলো:

1. **মডেল নাম**: প্রতিটি মডেল ক্লাসের নাম একবচন এবং StudlyCase ফরম্যাটে হওয়া উচিত। উদাহরণস্বরূপ, যদি টেবিলের নাম `products` হয়, তবে মডেলের নাম হবে `Product`।

2. **টেবিল নাম**: ডিফল্টভাবে, Eloquent মডেল নামের বহুবচন ফর্মকে টেবিল নাম হিসেবে ধরে। অর্থাৎ, `Product` মডেলের জন্য টেবিলের নাম হবে `products`। তবে, যদি টেবিলের নাম ভিন্ন হয়, তাহলে মডেলে নির্দিষ্টভাবে টেবিলের নাম দেওয়া যায়:

   ```php
   protected $table = 'my_custom_table';
   ```

3. **প্রাইমারি কী**: Eloquent প্রত্যেক টেবিলে `id` নামে একটি প্রাইমারি কী আশা করে। যদি আপনার টেবিলে অন্য কোন প্রাইমারি কী থাকে, তাহলে মডেলে এটি উল্লেখ করতে হবে:

   ```php
   protected $primaryKey = 'my_key';
   ```

4. **টিমস্ট্যাম্প**: ডিফল্টভাবে Eloquent প্রত্যেক টেবিলে `created_at` এবং `updated_at` কলাম আশা করে। যদি এই কলামগুলো না থাকে, তাহলে মডেলে টিমস্ট্যাম্প বন্ধ করে দেওয়া যায়:
   ```php
   public $timestamps = false;
   ```

### Naming Convention অনুসরণের সুবিধা

Laravel এর Naming Convention গুলি অনুসরণ করার ফলে Eloquent এর বিভিন্ন বিল্ট-ইন ফিচারগুলোর সর্বোচ্চ সুবিধা পাওয়া যায়। এটি কম কোড লেখার পাশাপাশি কোডকে আরও সহজ এবং মেইনটেনেবল করে তোলে।

### উপসংহার

## Laravel Eloquent ORM একটি শক্তিশালী টুল যা ডাটাবেস অপারেশনগুলোকে সরল এবং কার্যকর করে তোলে। প্রতিটি টেবিলের জন্য একটি মডেল তৈরি করে, Laravel এর Naming Convention গুলি অনুসরণ করে আমরা Eloquent ORM-এর বিভিন্ন সুবিধা উপভোগ করতে পারি, যেমন সহজ ডাটাবেস অপারেশন, সম্পর্ক ম্যানেজমেন্ট, এবং আরও অনেক কিছু।

Laravel Eloquent ORM এবং Query Builder দুটোই Laravel এর ডাটাবেস অপারেশনগুলোর জন্য ব্যবহৃত শক্তিশালী টুলস, কিন্তু এদের ব্যবহারের ধরন, সুবিধা এবং পার্থক্যগুলো কিছুটা ভিন্ন। এখানে Eloquent ORM এবং Query Builder-এর পার্থক্য ও তাদের মধ্যে সম্পর্কের বিস্তারিত আলোচনা করা হলো।

---

## Laravel Query Builder কি?

Laravel Query Builder হল একটি সহজ এবং সরল SQL নির্মাণকারী টুল যা ডাটাবেসে জটিল SQL কুয়েরি নির্মাণ এবং সম্পাদন করতে ব্যবহার করা হয়। Query Builder সরাসরি SQL কুয়েরি গুলি সহজে লেখার সুবিধা দেয়, এবং এটি Eloquent-এর মত মডেল ব্যবহার করে না। Query Builder আপনাকে চাহিদা অনুযায়ী ডাটাবেসে অপারেশন সম্পাদনের জন্য সুবিধাজনক মেথড সরবরাহ করে।

### Query Builder এর বৈশিষ্ট্য

- **নির্দিষ্ট মডেল না থাকলেও কাজ করতে পারে**: Query Builder দিয়ে ডাটাবেসের যে কোনো টেবিলের উপর কাজ করা যায়, মডেল প্রয়োজন হয় না।
- **সোজাসাপ্টা SQL স্টাইল**: এটি সরাসরি SQL স্টাইলের কাছাকাছি, তাই SQL-এর সরাসরি প্রয়োগের মতোই কাজ করে।
- **জটিল কুয়েরি তৈরি করা যায়**: কন্ডিশনাল স্টেটমেন্ট, গ্রুপিং, হ্যাভিং, জয়েন, অর্ডারিং এবং সাব-কুয়েরি ব্যবহার করে জটিল কুয়েরি তৈরি করা যায়।
- **অপটিমাইজেশন ও পারফর্মেন্স**: Query Builder অনেক ক্ষেত্রে তুলনামূলক দ্রুত কাজ করে, বিশেষ করে যেখানে মডেলের ওভারহেড নেই।

### Query Builder এর একটি উদাহরণ

```php
$users = DB::table('users')
            ->where('status', 'active')
            ->orderBy('created_at', 'desc')
            ->get();
```

এই উদাহরণে, `users` টেবিল থেকে সক্রিয় ব্যবহারকারীদের একটি তালিকা বের করা হয়েছে। Query Builder-এর মাধ্যমে `where`, `orderBy`, এবং `get` মেথড ব্যবহার করে সরাসরি SQL স্টাইল কুয়েরি লেখা হয়েছে।

---

## Eloquent ORM কি?

Eloquent ORM, যেটি Laravel-এ বিল্ট-ইন রয়েছে, মডেলের মাধ্যমে ডাটাবেস অপারেশন পরিচালনা করে। Eloquent ORM একটি সম্পূর্ণ Object-Oriented মডেলিং সিস্টেম যা প্রতিটি টেবিলকে একটি মডেলের সাথে সংযুক্ত করে। এই ORM-এর মাধ্যমে আমরা বিভিন্ন ডাটাবেস টেবিলের উপর CRUD অপারেশন এবং সম্পর্কিত তথ্য ম্যানেজ করতে পারি।

### Eloquent ORM এর বৈশিষ্ট্য

- **Object-Oriented ও Model-Based**: Eloquent ORM সরাসরি মডেল এর সাথে কাজ করে, প্রতিটি টেবিলকে একটি মডেল দ্বারা রিপ্রেজেন্ট করে।
- **সহজ সম্পর্ক (Relationship) ম্যানেজমেন্ট**: Eloquent ORM-এর মাধ্যমে সম্পর্কিত টেবিলগুলির মধ্যে সম্পর্ক (যেমন: One-to-One, One-to-Many) সহজে তৈরি ও ম্যানেজ করা যায়।
- **ইনহেরিটেড মেথড ও অ্যাট্রিবিউট**: Eloquent মডেলগুলির মাধ্যমে ইনহেরিটেড প্রোপার্টি এবং মেথড ব্যবহার করে ডাটাবেস অপারেশন পরিচালনা করতে পারে।
- **Autoloading ও Lazy Loading**: Eloquent মডেল Lazy Loading এবং Eager Loading এর সুবিধা প্রদান করে, যা ডাটাবেস অপটিমাইজেশনে সহায়তা করে।

### Eloquent ORM এর একটি উদাহরণ

```php
$users = User::where('status', 'active')
             ->orderBy('created_at', 'desc')
             ->get();
```

এখানে `User` মডেলের মাধ্যমে সরাসরি `users` টেবিলে অপারেশন চালানো হয়েছে। এটি Eloquent এর মেথডগুলো ব্যবহার করে Query Builder এর তুলনায় কিছুটা বেশি Object-Oriented উপায়ে SQL পরিচালনা করেছে।

---

## Eloquent ORM এবং Query Builder এর পার্থক্য

| বৈশিষ্ট্য                  | Eloquent ORM                                   | Query Builder                                      |
| -------------------------- | ---------------------------------------------- | -------------------------------------------------- |
| **প্রতিনিধিত্ব**           | প্রতিটি টেবিলের জন্য একটি মডেল ব্যবহৃত হয়      | সরাসরি টেবিলের উপর কাজ করা যায়, মডেল প্রয়োজন হয় না |
| **SQL স্টাইল**             | Object-Oriented পদ্ধতি, যেখানে মডেল ব্যবহার হয় | সোজাসাপ্টা SQL স্টাইল, SQL নির্মাণ সহজ             |
| **সম্পর্ক (Relationship)** | বিভিন্ন Relationship মেথড রয়েছে                | সম্পর্কিত টেবিলে কাজ করতে জয়েন মেথড ব্যবহার হয়     |
| **পারফর্মেন্স**            | মডেলের কারণে কিছুটা ধীর হতে পারে               | তুলনামূলকভাবে দ্রুত                                |
| **কুয়েরি ফ্লেক্সিবিলিটি**  | Object-Oriented স্টাইল কিছু ক্ষেত্রে সীমাবদ্ধ  | জটিল কুয়েরি তৈরিতে আরও ফ্লেক্সিবল                  |
| **টেবিলের প্রয়োজনীয়তা**   | মডেল এবং টেবিলের নির্দিষ্ট কনভেনশন থাকে        | নির্দিষ্ট কনভেনশন প্রয়োজন হয় না                    |

---

## Eloquent এবং Query Builder এর সম্পর্ক

Eloquent ORM মূলত Query Builder এর উপরে নির্মিত। যখনই Eloquent এ কোন মডেলের মাধ্যমে ডাটাবেস অপারেশন চালানো হয়, Laravel পিছনের দিকে Query Builder ব্যবহার করে SQL কুয়েরি তৈরি করে। অর্থাৎ, Query Builder হল Laravel এর ব্যাকগ্রাউন্ড SQL ইঞ্জিন, আর Eloquent ORM তার উপর একটি Object-Oriented স্তর তৈরি করেছে যা মডেলগুলোর মাধ্যমে ডাটাবেস অপারেশন সহজ করে তোলে।

---

## কখন Eloquent ORM এবং Query Builder ব্যবহার করবেন?

- **Eloquent ORM**: যখন আমাদের ডাটাবেস টেবিলগুলোর সাথে সম্পর্কিত মডেল ও সম্পর্কগুলো তৈরি করতে হয় এবং Object-Oriented পদ্ধতি সহজ করে কোড লেখা যায়। এক্ষেত্রে মডেল-ভিত্তিক অপারেশন, যেমন: `User::find(1)`, খুব সহজে করা যায়।

- **Query Builder**: যখন সরাসরি টেবিলের উপর অপারেশন করতে হয়, বা যেখানে মডেল ব্যবহার করতে ইচ্ছুক নই। Query Builder জটিল কুয়েরি, সাব-কুয়েরি, বা ডেটা ম্যানিপুলেশনের জন্য ভালো। এটি পারফর্মেন্স ক্রিটিক্যাল অবস্থায় খুব কার্যকরী, কারণ মডেলের ওভারহেড নেই।

### উপসংহার

## Laravel Eloquent ORM এবং Query Builder দুটি-ই Laravel এর ডাটাবেস ম্যানেজমেন্টের জন্য প্রয়োজনীয় টুলস। Eloquent ORM Object-Oriented পদ্ধতিতে মডেল ব্যবহার করে সম্পর্কগুলি ম্যানেজ করে, যেখানে Query Builder সরাসরি SQL নির্মাণের সুবিধা দেয়। তাদের ব্যবহারের পরিস্থিতি এবং উদ্দেশ্য অনুযায়ী উপযুক্ত টুলটি নির্বাচন করা উচিৎ।

---

Laravel এ Eloquent ORM এবং Query Builder আলাদাভাবে ব্যবহার করা সম্ভব হলেও, তাদের মধ্যে সম্পর্ক রয়েছে এবং একসাথে ব্যবহারের সুবিধাও রয়েছে। নিচে এই বিষয়গুলো নিয়ে বিস্তারিত আলোচনা করা হলো:

---

### একটি ব্যবহার করলে কি অন্যটি প্রয়োজন হয়?

Laravel Eloquent ORM এবং Query Builder দুটি ভিন্ন টুল যা বিভিন্ন পরিস্থিতিতে ব্যবহার করা যায়। Eloquent ORM একটি Object-Oriented পদ্ধতি অনুসরণ করে, যেখানে প্রতিটি টেবিলের জন্য একটি মডেল তৈরি করা হয় এবং মডেলের মাধ্যমে ডাটাবেস অপারেশন পরিচালিত হয়। অন্যদিকে, Query Builder সরাসরি SQL স্টাইলে টেবিলের উপর কাজ করার সুযোগ দেয়।

সাধারণত, Eloquent ORM ব্যবহার করলে Query Builder এর প্রয়োজন হয় না। তবে কিছু ক্ষেত্রে Eloquent এর সীমাবদ্ধতা এড়ানোর জন্য Query Builder ব্যবহার করতে হতে পারে, বিশেষ করে জটিল কুয়েরির ক্ষেত্রে।

---

### Query Builder কি মডেল ছাড়া টোটালি ব্যবহার করা যায়?

হ্যাঁ, Query Builder সম্পূর্ণভাবে মডেল ছাড়াই ব্যবহার করা যায়। এটি সরাসরি ডাটাবেসের টেবিলের উপর অপারেশন চালাতে পারে এবং এর জন্য মডেল বা টেবিলের কোনো বিশেষ কনভেনশন ফলো করার প্রয়োজন নেই। উদাহরণস্বরূপ, নিচের কুয়েরি দিয়ে `users` টেবিল থেকে সক্রিয় ব্যবহারকারীদের ডেটা পাওয়া যাবে, যেখানে মডেল ব্যবহার করা হয়নি:

```php
$activeUsers = DB::table('users')
                 ->where('status', 'active')
                 ->get();
```

---

### Query Builder এবং Eloquent ORM কি একসাথে ব্যবহার করা যায়?

হ্যাঁ, Query Builder এবং Eloquent ORM একই প্রজেক্টে একসাথে ব্যবহার করা যায় এবং অনেক সময় এই মিক্সড ব্যবহারই সর্বোত্তম সমাধান হতে পারে। উদাহরণস্বরূপ, যদি আপনি Eloquent ব্যবহার করে মডেল ভিত্তিক কাজ করতে চান এবং কোনো নির্দিষ্ট কুয়েরির জন্য জটিল সাব-কুয়েরি বা কাস্টম SQL যুক্ত করতে চান, তখন Query Builder কে Eloquent এর সাথে ইন্টিগ্রেট করতে পারেন।

#### উদাহরণ:

```php
$activeUsers = User::where('status', 'active')
                   ->whereExists(function($query) {
                       $query->select(DB::raw(1))
                             ->from('posts')
                             ->whereRaw('posts.user_id = users.id')
                             ->where('posts.published', true);
                   })
                   ->get();
```

এই কুয়েরিতে Eloquent মডেল `User` এবং Query Builder এর মেথড `whereExists()` একই সাথে ব্যবহার করা হয়েছে।

---

### কখন কোনটি সুবিধাজনক?

1. **Eloquent ORM**:

   - **যখন Object-Oriented পদ্ধতিতে কাজ করতে চান**: Eloquent এর মাধ্যমে আপনি মডেল-ভিত্তিক কোড লিখতে পারেন, যা পড়তে ও বুঝতে সহজ।
   - **যখন সম্পর্কিত ডেটার অপারেশন পরিচালনা করতে হয়**: Eloquent এ বিভিন্ন Relationship (যেমন: `hasOne`, `hasMany`) সহজে তৈরি ও পরিচালনা করা যায়।
   - **ছোট এবং কমপ্লেক্স নয় এমন কুয়েরির জন্য**: সাধারণ CRUD অপারেশনের জন্য Eloquent খুবই কার্যকর।

2. **Query Builder**:

   - **জটিল এবং কাস্টম SQL কুয়েরির জন্য**: যখন জটিল সাব-কুয়েরি বা কাস্টম SQL স্টেটমেন্ট প্রয়োজন হয়।
   - **পারফর্মেন্স ক্রিটিক্যাল অবস্থা**: অনেক ক্ষেত্রেই Query Builder তুলনামূলক দ্রুত হতে পারে, কারণ এতে মডেল ওভারহেড থাকে না।
   - **মডেল বা টেবিলের জন্য কনভেনশন প্রয়োজন হয় না**: আপনি টেবিলের নাম, কলাম সব কাস্টমাইজ করতে পারেন, যা Eloquent মডেল ভিত্তিক নয়।

3. **Eloquent এবং Query Builder একসাথে**:
   - **যখন মডেল সম্পর্কিত অপারেশনে সাব-কুয়েরি বা কাস্টম SQL প্রয়োজন**: আপনি Eloquent এবং Query Builder এর সুবিধাগুলো একসাথে পেতে পারেন।
   - **প্রোজেক্টের বিভিন্ন অংশে ভিন্ন ভিন্ন দরকার**: যদি কিছু টেবিলে Eloquent ব্যবহার করা সুবিধাজনক হয় এবং কিছু টেবিলে Query Builder এর সরাসরি SQL ব্যবহার প্রয়োজন হয়।

---

### উপসংহার

## Eloquent ORM এবং Query Builder উভয়ই Laravel এর শক্তিশালী টুলস, এবং প্রোজেক্টের চাহিদা অনুযায়ী উপযুক্ত টুলটি নির্বাচন করা গুরুত্বপূর্ণ। Eloquent ORM সাধারণ CRUD এবং সম্পর্কিত ডেটা অপারেশনে কার্যকর, যেখানে Query Builder জটিল কুয়েরি ও কাস্টম SQL তৈরি করতে সহায়ক। প্রয়োজনে Eloquent ORM এবং Query Builder একসাথে ব্যবহার করে ডাটাবেস অপারেশন গুলো আরও ফ্লেক্সিবল এবং অপ্টিমাইজড করা সম্ভব।

---

আমরা এখন থেকে শুরু করছি Laravel Eloquent ORM নিয়ে । শরুরেই আমরা বুঝার চেষ্টা করি এটি কি Elequent is an object-relational mapper (ORM). যেটিতে হয় কি আমরা যে ডাটাবেইজ এ টেবিল গুলো নিয়ে কাজ করি সেগুলোর প্রত্যেকটিকে একটি models দিয়ে রিপ্রেজেন্ট করা হয়। সেই মডেলের মাধ্যমে সেই স্পেসিপিক টেবিলকে অর্থাৎ যে টিবিলকে যে মডেল রিপেজেন্ট করে ডেটাবেইজ অপারেশন চালানো যায় মানে ক্রিয়েট করা ডিলিট করা আপডেইট করা শুধু এটাই নয় (আমরা রিলেশনাল ডাটাবেইজ এ জানি যে এখানে টেবিল গুলো ওয়ান টু ওয়ান ওয়ান টু মেনি এই ধরনের বিভিন্ন রিলেশনশিপে থাকে ) এখানে যেহেতু এই মডেলটি একটি টেবিল কে রিপ্রেজেন্ট করছে তাই এই মডেলে মডেলে ও রিলেশনশিপ তৈরি করা যায়। লারাভেল এ এই ধরনের রিলেশন শিপ তৈরি করার জন্য আমরা বিভিন্ন ধরনের মেথড বিল্ট ইন প্রোপাটি আছে। আসলে Laravel Eloquent ORM আমাদের যে ডাটাবেইজ আছে তার উপর একটি লেয়ার তৈরি করছে যেই লেয়ার এর মাধ্যমে আমরা ডাটাবেইজ অপারেশনস গুলোকে মেনেজ করছি। Laravel Eloquent ORM এর ভেতর হই কি যখনি আমরা কোন মডেল তৈরি করতে যাই সেই মডেলের বিভিন্ন কনভেনশন থাকে যেমন মডেলের নাম কেমন হবে কোন প্রোপাটিং বিল্ড ইন থাকবে লারাভের কোন প্রোপাটি এক্সপেক্ট করে তাই লারাভের শুধু মডেল তৈরি করলেই হবে না আমাদের যে নেমিং কনভেনশন গুলো আছে সেগুলোকেও আমাদের ফলো করতে হবে। আমরা যদি কনভেন শন ফলো করে তৈরি করি তবে আমাদের লারাভেল থেকে যা যা প্রাথমিক হেল্প পাওয়া যায় তার মেক্সিমাম পাবো।
