Laravel-এর `insert` মেথড সম্পর্কে বিস্তারিত আলোচনা করছি। এই মেথডটি ব্যবহার করে কীভাবে ডেটাবেজে নতুন রেকর্ড যুক্ত করা যায় এবং এর সাথে সম্পর্কিত নানা বিষয়ে জানাচ্ছি।

### `insert` মেথড কী?

Laravel-এ `insert` মেথডটি `DB` ফ্যাসাডের মাধ্যমে ব্যবহার করা হয়, যা ডেটাবেজে এক বা একাধিক রেকর্ড ইনসার্ট করতে সাহায্য করে। এটি মূলত একটি সাধারণ SQL `INSERT INTO` স্টেটমেন্টের সমতুল্য।

`insert` মেথডটি একটি অ্যারে নেয়, যেখানে অ্যারেটির কীগুলো টেবিলের কলাম নাম এবং মানগুলো ইনসার্ট করতে চাওয়া ডেটার মান হিসেবে কাজ করে।

#### সিনট্যাক্স

```php
DB::table('table_name')->insert([
    'column1' => 'value1',
    'column2' => 'value2',
    // ... অন্যান্য কলাম এবং মান
]);
```

#### উদাহরণ

ধরি, আমাদের একটি `brands` নামে টেবিল আছে এবং আমরা এতে একটি নতুন রেকর্ড ইনসার্ট করতে চাই। এর জন্য নিচের কোডটি ব্যবহার করা যেতে পারে:

```php
DB::table('brands')->insert([
    'brandName' => 'New Brand',
    'brandImg' => 'new_brand.jpg',
]);
```

এখানে:

- `table('brands')` নির্দেশ করে যে `brands` টেবিলে ডেটা ইনসার্ট করতে হবে।
- `insert()` মেথডটি কল করে একটি অ্যারে পাস করা হয়েছে, যেখানে `'brandName' => 'New Brand'` এবং `'brandImg' => 'new_brand.jpg'` উল্লেখ করা হয়েছে।

### একাধিক রেকর্ড ইনসার্ট করা

Laravel-এর `insert` মেথডের মাধ্যমে একাধিক রেকর্ডও ইনসার্ট করা সম্ভব। এটি করার জন্য, অ্যারেটির ভিতরে একাধিক অ্যারে যুক্ত করতে হয়, যেগুলো একেকটি রেকর্ড হিসেবে কাজ করবে।

#### উদাহরণ

ধরি, আমরা `brands` টেবিলে একাধিক ব্র্যান্ডের তথ্য ইনসার্ট করতে চাই:

```php
DB::table('brands')->insert([
    ['brandName' => 'Brand A', 'brandImg' => 'brand_a.jpg'],
    ['brandName' => 'Brand B', 'brandImg' => 'brand_b.jpg'],
    ['brandName' => 'Brand C', 'brandImg' => 'brand_c.jpg'],
]);
```

এখানে:

- তিনটি রেকর্ড ইনসার্ট করা হয়েছে, এবং প্রতিটি রেকর্ডের জন্য `brandName` এবং `brandImg` কলামের মান আলাদা করে উল্লেখ করা হয়েছে।

### `insert` মেথড কীভাবে কাজ করে?

`insert` মেথডটি ডেটাবেজে সরাসরি নতুন ডেটা ইনসার্ট করে এবং সফলভাবে ডেটা ইনসার্ট হলে এটি `true` রিটার্ন করে। ইনসার্ট সফল না হলে, এটি `false` রিটার্ন করে।

### টাইমস্ট্যাম্প সহ ইনসার্ট করা

অনেক সময় টেবিলের ডেটা ইনসার্ট করার সময় `created_at` এবং `updated_at` টাইমস্ট্যাম্পও ইনসার্ট করতে হয়। এই ক্ষেত্রে, Laravel এর `now()` ফাংশন ব্যবহার করে বর্তমান সময় সেট করা যায়।

#### উদাহরণ

`brands` টেবিলে টাইমস্ট্যাম্পসহ ইনসার্ট করা:

```php
DB::table('brands')->insert([
    'brandName' => 'Brand D',
    'brandImg' => 'brand_d.jpg',
    'created_at' => now(),
    'updated_at' => now(),
]);
```

### চেক করা যে ইনসার্ট সফল হয়েছে কিনা

ইনসার্ট সফল হয়েছে কিনা তা যাচাই করার জন্য `insert()` মেথডের রিটার্ন ভ্যালুকে একটি ভেরিয়েবলে সংরক্ষণ করা যায় এবং কন্ডিশনের মাধ্যমে চেক করা যায়।

#### উদাহরণ

```php
$inserted = DB::table('brands')->insert([
    'brandName' => 'Brand E',
    'brandImg' => 'brand_e.jpg',
]);

if ($inserted) {
    echo "Data inserted successfully!";
} else {
    echo "Failed to insert data.";
}
```

### ইনসার্ট এর জন্য প্রয়োজনীয় কিছু বিষয়

- `insert()` মেথডটি সাধারণত `auto-increment` প্রাইমারি কী গুলো নিজে থেকেই তৈরি করে।
- যদি কোন ডেটা ইনসার্টের জন্য `nullable` কলাম খালি থাকে তবে সেগুলো বাদ দেয়া যেতে পারে।

### `insertGetId` মেথড

যদি ইনসার্ট করার পরে ইনসার্ট করা রেকর্ডের `id` বা প্রাইমারি কী দরকার হয়, তবে `insertGetId` মেথড ব্যবহার করা যেতে পারে। এটি মূলত সেই রেকর্ডের `id` রিটার্ন করে।

#### উদাহরণ

```php
$id = DB::table('brands')->insertGetId([
    'brandName' => 'Brand F',
    'brandImg' => 'brand_f.jpg',
]);

echo "Inserted record ID: " . $id;
```

এখানে ইনসার্টের পরে সেই রেকর্ডের `id` সরাসরি আমরা পেয়ে যাচ্ছি।

### সারণী

| মেথড          | বিবরণ                                                                     |
| ------------- | ------------------------------------------------------------------------- |
| `insert`      | এক বা একাধিক রেকর্ড ইনসার্ট করতে ব্যবহৃত হয়, সফল হলে `true` রিটার্ন করে। |
| `insertGetId` | ইনসার্টের পরে রেকর্ডের `id` রিটার্ন করে।                                  |
| `now()`       | বর্তমান সময় টাইমস্ট্যাম্প হিসেবে ইনসার্ট করার জন্য ব্যবহার করা হয়।      |

### শেষ কথা

Laravel এর `insert` মেথড ডেটাবেজে সহজে ডেটা ইনসার্ট করার জন্য একটি কার্যকরী উপায় প্রদান করে। এটি প্রাথমিক কাজগুলির জন্য সরাসরি SQL ইনসার্টের বিকল্প হিসেবে কাজ করে এবং ডেটাবেজে দ্রুত ইনসার্টের সুবিধা প্রদান করে।

এখন আপনি আপনার উদাহরণ হিসেবে `categories`, `brands`, এবং `products` টেবিল গুলো ব্যবহার করে বিভিন্ন ধরনের ইনসার্ট করতে পারেন।

Laravel-এর `insert` মেথডে সাধারণত এসোসিয়েটিভ অ্যারের মাধ্যমে ডেটা প্রদান করা হয়, যেমন আপনি উপরের উদাহরণে দেখিয়েছেন। তবে এই মেথডে ডেটা ইনসার্ট করার জন্য আরও কিছু পদ্ধতি রয়েছে, যেগুলি বিভিন্ন পরিস্থিতিতে উপকারী হতে পারে। নিচে সেগুলি নিয়ে আলোচনা করা হলো:

### ১. এসোসিয়েটিভ অ্যারে ব্যবহার করে ইনসার্ট

এটি `insert` মেথডে ডেটা ইনসার্ট করার সবচেয়ে সাধারণ ও প্রচলিত পদ্ধতি, যেখানে কলামের নামগুলিকে কীগুলোর সাথে মিলিয়ে ডেটা দেওয়া হয়।

```php
DB::table('brands')->insert([
    'brandName' => 'Brand D',
    'brandImg' => 'brand_d.jpg',
    'created_at' => now(),
    'updated_at' => now(),
]);
```

### ২. একাধিক রেকর্ড একসাথে ইনসার্ট করা

`insert` মেথডে একাধিক রেকর্ড একই সাথে ইনসার্ট করতে পারবেন। এর জন্য একটি মাল্টি-ডাইমেনশনাল অ্যারে ব্যবহার করা হয়।

```php
DB::table('brands')->insert([
    [
        'brandName' => 'Brand E',
        'brandImg' => 'brand_e.jpg',
        'created_at' => now(),
        'updated_at' => now(),
    ],
    [
        'brandName' => 'Brand F',
        'brandImg' => 'brand_f.jpg',
        'created_at' => now(),
        'updated_at' => now(),
    ]
]);
```

এই পদ্ধতিতে একাধিক ডেটা ইনসার্ট করা সময় সাশ্রয়ী, কারণ এটি একবারেই ডেটা ইনসার্ট করে।

### ৩. `insertGetId` ব্যবহার করে ইনসার্ট করা (প্রাইমারি কী এর জন্য)

যদি আপনার টেবিলে অটো ইনক্রিমেন্ট করা প্রাইমারি কী থাকে, তাহলে `insertGetId` মেথড ব্যবহার করে ডেটা ইনসার্ট করার পর ওই নতুন রেকর্ডের ID রিটার্ন করতে পারেন।

```php
$id = DB::table('brands')->insertGetId([
    'brandName' => 'Brand G',
    'brandImg' => 'brand_g.jpg',
    'created_at' => now(),
    'updated_at' => now(),
]);

echo "Newly inserted ID: " . $id;
```

### ৪. `firstOrCreate` বা `firstOrNew` এর মাধ্যমে ইনসার্ট করা

যদি কোনো রেকর্ড ইতিমধ্যেই থাকে কিনা সেটি চেক করতে চান, তাহলে `firstOrCreate` ব্যবহার করতে পারেন। এটি যদি রেকর্ড না থাকে, তবে নতুন রেকর্ড ইনসার্ট করে, আর থাকলে ওই রেকর্ডটি রিটার্ন করে।

```php
$brand = DB::table('brands')->firstOrCreate(
    ['brandName' => 'Brand H'],
    [
        'brandImg' => 'brand_h.jpg',
        'created_at' => now(),
        'updated_at' => now(),
    ]
);
```

`firstOrNew` মেথডটিও প্রায় একই রকম, তবে এটি রেকর্ড সেভ করে না, বরং একটি নতুন মডেল ইনস্ট্যান্স তৈরি করে।

### ৫. `upsert` ব্যবহার করে ইনসার্ট ও আপডেট একসাথে করা

Laravel 8 থেকে `upsert` মেথড চালু করা হয়েছে, যেটি ইনসার্ট বা আপডেট উভয় কাজ একসাথে করতে পারে। এটি মূলত ইউনিক বা প্রাইমারি কী অনুযায়ী ডেটা চেক করে, যদি ডেটা মিলে যায় তাহলে আপডেট করে, অন্যথায় নতুন রেকর্ড ইনসার্ট করে।

```php
DB::table('brands')->upsert([
    ['brandName' => 'Brand I', 'brandImg' => 'brand_i.jpg', 'created_at' => now(), 'updated_at' => now()],
    ['brandName' => 'Brand J', 'brandImg' => 'brand_j.jpg', 'created_at' => now(), 'updated_at' => now()]
], ['brandName'], ['brandImg', 'updated_at']);
```

এখানে `brandName` কলামটি চেক করা হবে। যদি মিলে যায় তাহলে `brandImg` এবং `updated_at` আপডেট হবে, অন্যথায় নতুন রেকর্ড ইনসার্ট হবে।

### ৬. RAW SQL ব্যবহার করে ইনসার্ট করা

যদি সরাসরি SQL কোড দিয়ে ডেটা ইনসার্ট করতে চান, তাহলে `DB::statement` ব্যবহার করতে পারেন।

```php
DB::statement("INSERT INTO brands (brandName, brandImg, created_at, updated_at) VALUES ('Brand K', 'brand_k.jpg', NOW(), NOW())");
```

এই পদ্ধতিতে সাধারণত সহজ SQL ইনসার্ট করা যায়, তবে লারাভেল মেথডগুলির তুলনায় কম ব্যবহার করা হয়।

### সংক্ষেপে

Laravel এর `insert` মেথড বিভিন্ন পদ্ধতিতে ডেটা ইনসার্ট করতে পারে। বিশেষভাবে ব্যবহারের ক্ষেত্রেই বিভিন্ন পদ্ধতি বেছে নিতে হয়, যেমন একাধিক রেকর্ড ইনসার্ট করার জন্য মাল্টি-ডাইমেনশনাল অ্যারে, প্রাইমারি কী রিটার্নের জন্য `insertGetId`, এবং বিদ্যমান ডেটা চেক করে আপডেট করার জন্য `upsert`।
